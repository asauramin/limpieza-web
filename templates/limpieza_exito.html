{% extends 'base.html' %}
{% block head %}
    <title>Limpieza terminada</title>
{% endblock%}

{% block body %}
<h1>Limpieza terminada</h1>
<h2>Redirigiendo a la p√°gina principal en <span class="secundero">5</span> segundos</h2>
<h2>Se ha eliminado a {{ eliminados|length }} usuarios:</h2>
<ul>
    {% for eliminado in eliminados %}
    <li>eliminado</li>
    {% endfor %}       
</ul>
<script>
    function sleep(ms){
        return new Promise(resolve => setTimeout(resolve,ms));
    }
    async function lio(){
        for (let i = 0; i < 5; i++) {
            let secondsText = document.querySelector('.secundero');
            let remaining = 5 - i;
            secondsText.innerHTML = remaining;
            await sleep(1000);
        }
        window.location.href = "/";
    }
    lio();
</script>
{% endblock%}